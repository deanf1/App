<html>

<head>	
<style>* {margin:0;padding:0;}
		canvas { background:url(umbcmap1.png) }</style>

<script type="text/javascript">

function FindPosition(oElement)
{
  if(typeof( oElement.offsetParent ) != "undefined")
  {
    for(var posX = 0, posY = 0; oElement; oElement = oElement.offsetParent)
    {
      posX += oElement.offsetLeft;
      posY += oElement.offsetTop;
    }
      return [ posX, posY ];
    }
    else
    {
      return [ oElement.x, oElement.y ];
    }
}
function drawCircle(coordX, coordY) {
	console.log("FUCK");
	var canvas = document.getElementById('mapImg');
      var context = canvas.getContext('2d');
      var centerX = coordX;
      var centerY = coordY;
      var radius = 30;

      context.beginPath();
      context.arc(centerX, centerY, radius, 0, 2 * Math.PI, false);
      context.fillStyle = 'green';
      context.fill();
      context.lineWidth = 2;
      context.strokeStyle = '#003300';
      context.stroke();
}
function GetCoordinates(e)
{
  var PosX = 0;
  var PosY = 0;
  var ImgPos;
  ImgPos = FindPosition(myImg);
  if (!e) var e = window.event;
  if (e.pageX || e.pageY)
  {
    PosX = e.pageX;
    PosY = e.pageY;
  }
  else if (e.clientX || e.clientY)
    {
      PosX = e.clientX + document.body.scrollLeft
        + document.documentElement.scrollLeft;
      PosY = e.clientY + document.body.scrollTop
        + document.documentElement.scrollTop;
    }
  PosX = PosX - ImgPos[0];
  PosY = PosY - ImgPos[1];
  var height = document.getElementById('mapImg').height;
  var width = document.getElementById('mapImg').width;
  console.log(height, width);
  document.getElementById("x").innerHTML = PosX / width;
  document.getElementById("y").innerHTML = PosY / height;
  var xDouble = PosX / width;
  var yDouble = PosY / height;
  drawCircle(PosX, PosY);
  JSInterface.changeActivity(xDouble, yDouble);
  
}

</script>
</head>

<body>

 <canvas id="mapImg" width="2048" height="2041" style="border:1px solid" ></canvas>

<!-- <img id="mapImg" alt="" src="umbcmap2.png" height="90%"/> -->
<script type="text/javascript">

var myImg = document.getElementById("mapImg");
myImg.onmousedown = GetCoordinates;

</script>

<p>X:<span id="x"></span></p>
<p>Y:<span id="y"></span></p>
</body>
</html>